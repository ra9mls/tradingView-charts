# Troubleshooting Guide / Руководство по устранению неполадок

## Общие проблемы / Common Issues

### 1. График не отображается / Chart Not Displaying

**Симптомы:**
- Кнопка Execute нажата, но график не появляется
- Нет сообщения об ошибке

**Решения:**

1. **Откройте консоль браузера** (F12)
   - Проверьте наличие ошибок JavaScript
   - Найдите сообщения, начинающиеся с "Fetching data" и "Response received"

2. **Проверьте параметры запроса:**
   ```
   - Адрес токена: правильный формат Solana
   - Даты: From должна быть раньше To
   - Интервал: соответствует диапазону дат
   ```

3. **Попробуйте другой endpoint:**
   - Переключитесь между Sandbox и Staging
   - Один из них может быть временно недоступен

4. **Используйте тестовые данные:**
   ```
   Token: cbbtcf3aa214zXHbiAZQwf4122FBYbraNdFqgw4iMij
   Interval: 1H
   From: 2025-10-14 00:00
   To: 2025-10-15 00:00
   Endpoint: Sandbox
   ```

---

### 2. Ошибка "No data available" / Нет данных

**Причины:**
- Токен новый или неликвидный
- Выбранный диапазон дат не содержит торговых данных
- Неправильный адрес токена

**Решения:**

1. **Проверьте адрес токена:**
   - Используйте Solana Explorer для проверки
   - Убедитесь, что это адрес mint (не wallet)

2. **Измените диапазон дат:**
   - Выберите более недавний период
   - Уменьшите диапазон (например, 1-2 дня)

3. **Попробуйте популярные токены:**
   - SOL: `So11111111111111111111111111111111111111112`
   - USDC: `EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`

---

### 3. Ошибка API / API Errors

**"Network error":**
```
Решение:
1. Проверьте интернет-соединение
2. Проверьте, не блокирует ли firewall запросы
3. Попробуйте другую сеть
```

**"API Error: ...":**
```
Решение:
1. Проверьте формат запроса в консоли
2. Попробуйте другой endpoint
3. Подождите несколько минут и попробуйте снова
```

**CORS Error:**
```
Решение:
1. Убедитесь, что приложение запущено через npm run dev
2. Не открывайте HTML файлы напрямую (file://)
3. Используйте http://localhost:3000
```

---

### 4. График "замерз" / Chart Frozen

**Симптомы:**
- График не реагирует на взаимодействие
- Невозможно панорамировать или зумировать

**Решения:**

1. **Обновите страницу** (Ctrl+R / Cmd+R)

2. **Очистите кеш браузера:**
   - Chrome: Ctrl+Shift+Delete
   - Firefox: Ctrl+Shift+Delete
   - Safari: Cmd+Option+E

3. **Проверьте размер данных:**
   - Слишком большой набор данных может замедлить график
   - Уменьшите диапазон дат
   - Увеличьте интервал (например, с 1M до 1H)

---

### 5. Ошибки сборки / Build Errors

**При запуске `npm run build`:**

```bash
# Очистите кеш
rm -rf .next node_modules package-lock.json

# Переустановите зависимости
npm install

# Попробуйте снова
npm run build
```

**TypeScript ошибки:**
```bash
# Проверьте версию TypeScript
npm list typescript

# Должна быть 5.6+
# Если нет, обновите:
npm install typescript@latest -D
```

---

### 6. Медленная загрузка / Slow Loading

**Оптимизация:**

1. **Уменьшите диапазон дат**
   - Вместо месяца попробуйте неделю
   - Используйте более крупный интервал

2. **Проверьте сетевую скорость**
   - Откройте Network tab в DevTools
   - Проверьте время ответа API

3. **Очистите старые данные**
   - Обновите страницу перед новым запросом

---

## Отладка в консоли / Console Debugging

### Полезные команды в консоли браузера:

```javascript
// Проверить текущее состояние
console.log("Chart data loaded");

// Проверить localStorage
localStorage.clear(); // Очистить, если нужно

// Проверить размер данных
console.log(performance.memory); // Chrome only
```

---

## Логирование / Logging

Приложение логирует важную информацию в консоль:

```
1. "Fetching data with params:" - параметры запроса
2. "Response received:" - ответ API
3. "Received X data points" - количество свечей
4. Ошибки с префиксом "Error:" или "GraphQL Error:"
```

Проверяйте консоль для диагностики проблем.

---

## Специфичные ошибки / Specific Errors

### "Invalid response format from API"

**Причина:** API вернул неожиданную структуру данных

**Решение:**
1. Проверьте логи в консоли
2. Убедитесь, что API endpoint доступен
3. Попробуйте другой endpoint (Sandbox ↔ Staging)

---

### "From date must be before To date"

**Причина:** Даты указаны в неправильном порядке

**Решение:**
1. Убедитесь, что From < To
2. Проверьте часовой пояс
3. Не используйте будущие даты

---

### Chart library errors

**"Cannot read property 'setData' of null"**

**Решение:**
1. График не успел инициализироваться
2. Обновите страницу
3. Проверьте, что компонент TradingViewChart загружен

---

## Проверка работоспособности / Health Check

Выполните эти шаги для проверки:

### 1. Базовая проверка
```bash
# Сервер запущен?
curl http://localhost:3000
# Должен вернуть HTML

# Зависимости установлены?
ls node_modules | wc -l
# Должно быть ~300+ пакетов
```

### 2. API доступен?
```bash
# Проверка Sandbox
curl -X POST https://gcp-sandbox-gateway.rift.ai/graphql/api \
  -H "Content-Type: application/json" \
  -d '{"query":"{ __typename }"}'
# Должен вернуть JSON

# Проверка Staging
curl -X POST https://gcp-staging-gateway.rift.ai/graphql/api \
  -H "Content-Type: application/json" \
  -d '{"query":"{ __typename }"}'
# Должен вернуть JSON
```

### 3. Браузер поддерживается?
- Chrome 90+: ✅
- Firefox 88+: ✅
- Safari 14+: ✅
- Edge 90+: ✅

---

## Сбор информации для отчета об ошибке / Bug Report Info

При создании отчета об ошибке, включите:

```
1. Версия браузера:
   - Chrome: chrome://version
   - Firefox: about:support
   - Safari: Safari > About Safari

2. Параметры запроса:
   - Token address
   - Interval
   - Date range
   - Endpoint

3. Ошибка из консоли:
   - Скриншот или текст ошибки

4. Network log:
   - DevTools > Network > Export HAR

5. Шаги воспроизведения:
   - Подробное описание действий
```

---

## Контакты поддержки / Support

Если проблема не решена:

1. Проверьте [GitHub Issues](https://github.com/your-repo/issues)
2. Создайте новый issue с полной информацией
3. Приложите скриншоты и логи

---

## Быстрые тесты / Quick Tests

### Тест 1: Базовая функциональность
```
1. Откройте http://localhost:3000
2. Нажмите Execute (не меняя параметры)
3. Ожидаемо: график загружается через 2-3 секунды
```

### Тест 2: Разные интервалы
```
1. Измените Interval на каждый вариант (1M, 5M, 1H, ...)
2. Нажмите Execute для каждого
3. Ожидаемо: график обновляется с новыми данными
```

### Тест 3: Разные endpoints
```
1. Выберите Sandbox, нажмите Execute
2. Выберите Staging, нажмите Execute
3. Ожидаемо: оба работают (данные могут отличаться)
```

---

## Известные ограничения / Known Limitations

1. **Максимум данных:** API может ограничивать количество свечей
2. **Исторические данные:** Старые данные могут быть недоступны
3. **Новые токены:** Могут не иметь достаточной истории
4. **Rate limiting:** API может ограничивать частоту запросов

---

**Последнее обновление:** 2025-10-16
